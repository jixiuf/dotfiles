# sway does not set DISPLAY/WAYLAND_DISPLAY in the systemd user environment
# See FS#63021
# Adapted from xorg's 50-systemd-user.sh, which achieves a similar goal.

exec systemctl --user import-environment DISPLAY WAYLAND_DISPLAY SWAYSOCK XDG_CURRENT_DESKTOP
exec hash dbus-update-activation-environment 2>/dev/null && \
     dbus-update-activation-environment --systemd DISPLAY WAYLAND_DISPLAY SWAYSOCK XDG_CURRENT_DESKTOP
     
exec_always systemctl --user start sway-session.target

# auth agent
exec /usr/libexec/polkit-gnome-authentication-agent-1
exec $HOME/bin/autotiling-rs
exec --no-startup-id fcitx5 -d --replace
exec emacs --daemon
exec $HOME/bin/swayrd
# 记录上次聚焦的窗口
exec $HOME/bin/sway-track-prev-focus &
exec $HOME/bin/sway-track-prev-tile-focus &

# bindsym --no-repeat control+tab [con_mark=_prev] focus
bindsym --no-repeat control+mod4+tab [con_mark=_prev_con] focus
# bindsym control+shift+tab [con_mark=_prev_floating_con] focus

# to enable fast switching between 2 apps
# exec --no-startup-id /usr/local/bin/xremap  /etc/xremap.yaml --watch
# exec_always fcitx5 -d --replace


