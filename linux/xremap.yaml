# https://github.com/k0kubun/xremap
# key 的名字参见
# https://github.com/emberian/evdev/blob/1d020f11b283b0648427a2844b6b980f1a268221/src/scancodes.rs#L26-L572
# sudo systemctl restart xremap
# super = cmd on macos and win on windows
# journalctl -u xremap
# key 不区分大小写，如 Super=super
# modmap:                         # 单 key 到单 key 的映射,用处不大
#   - name: Global
#     remap:
#       capslock:
#         held: Ctrl_L # Required
#         alone: space # Required
#         alone_timeout_millis: 1000 # Optional

      # # CapsLock/Ctrl_L -> Esc
      # CapsLock: Esc
      # Ctrl_L: Esc

      # HHKB: [Alt_L] [Muhenkan] [Space] [Henkan] [KatakanaHiragana]
      # Alt_L: Ctrl_R # for Ctrl+Click

  # - name: Kana -> Windows
  #   application:
  #     not: jetbrains-idea
  #   remap:
  #     # Use Windows since Alt is annoying in Electron apps (Slack, Nocturn)
  #     KatakanaHiragana: Win_R

  # - name: Kana -> Alt
  #   application:
  #     only: jetbrains-idea
  #   remap:
  #     # Use Alt since Windows is annoying in IDEA
  #     KatakanaHiragana: Alt_L

keymap:
  #     C-k: [Shift-end, backspace] # TODO: Alt-C-k
  #     # actually these are vim insert mode bindings, but compatible with shell
  #     # C-w: [C-Shift-left, delete]
  #     # workaround prefix key bug
  #     M-r:
  #       remap:
  #         '3': C-M-3
  #         '0': C-M-0
  - name: Google Search
    application:
      only: Google-chrome
    remap:
      Super-C-p: C-Shift-t
      Super-C-n: C-tab
      Super-C-k: C-Shift-tab
      Super-C-j: C-tab
      Super-C-h: M-left
      Super-C-l: M-right
      Super-C-o: C-l
      Super-C-w: C-w
      Super-C-t: C-t
      Super-C-r: C-r
      C-n: down
      C-p: up
      C-f: right
      C-b: left

# 非 emacs 程序中按下 right shift  dual-function-keys 将 shift 其转成 ctrl-space
# 此处将 ctrl-space 转成 spuer-space 触发输入法切换
# 而 emacs 中直接处理 ctrl-space 的绑定
  - name: Toggle Input Method for App but not Emacs
    application:
      not: emacs
    remap:
      # C-Space:  [Esc , Super-Space]
      C-Space:  Super-Space
  - name: Default -- some of these are overridden by the above definitions
    application:
      not: [Gnome-terminal, emacs]
      # not: [Google-chrome, Slack, Gnome-terminal, jetbrains-idea,emacs]
    remap:
      Super-C-a: C-a
      Super-C-c: C-c
      Super-C-v: C-v
      Super-C-z: C-z
      Super-C-s: C-s
      Super-C-r: C-r
      C-a: Home
      C-e: End

      # Alt -> Ctrl
      # Super-Enter: M-Enter
      # C-w: [C-Shift-left, delete]
