# https://github.com/k0kubun/xremap
# key 的名字参见
# https://github.com/emberian/evdev/blob/1d020f11b283b0648427a2844b6b980f1a268221/src/scancodes.rs#L26-L572
# sudo systemctl restart xremap
# super = cmd on macos and win on windows
# journalctl -u xremap
keymap:
  - name: firefox
    application:
      only: firefox
    remap:
      # Super-C-p: C-Shift-t
      Super-C-u: C-Shift-t
      Super-C-p: C-Shift-t
      Super-C-k: C-Shift-tab
      Super-C-j: C-tab
      Super-C-h: M-left
      Super-C-l: M-right
      Super-C-o: C-l
      Super-C-w: C-w
      Super-C-t: C-t
      Super-C-r: C-r
      C-n: down
      C-p: up
      C-f: right
      C-b: left
      Super-C-f: Super-C-f      #否则会变成 Super-right,因上面 C-f->right
      Super-C-b: Super-C-b
      Super-C-p: Super-C-p
      Super-C-n: Super-C-n
  - name: Google Search
    application:
      only: [Google-chrome,google-chrome]
    remap:
      M-backspace: C-Backspace
      Super-C-u: C-Shift-t
      Super-C-p: C-Shift-t
      Super-C-n: C-tab
      Super-C-k: C-Shift-tab
      Super-C-j: C-tab
      Super-C-h: M-left
      Super-C-l: M-right
      Super-C-o: C-l
      Super-C-w: C-w
      Super-C-t: C-t
      Super-C-r: C-r
      C-n: down
      C-p: up
      C-f: right
      C-b: left
      C-a: Home
      C-e: End
      M-f: C-right
      M-b: C-left
      Super-M-f: Super-C-right
      Super-M-b: Super-C-left
      Super-C-f: Super-C-f      #否则会变成 Super-right,因上面 C-f->right
      Super-C-b: Super-C-b
      Super-C-p: Super-C-p
      Super-C-n: Super-C-n
      Super-C-a: Super-C-a
      Super-C-e: Super-C-e

# 非 emacs 程序中按下 right shift  dual-function-keys 将 shift 其转成 ctrl-space
# 此处将 ctrl-space 转成 spuer-space 触发输入法切换
# 而 emacs 中直接处理 ctrl-space 的绑定
  - name: Toggle Input Method for App but not Emacs
    application:
      not: [emacs,Emacs]
    remap:
      Super-M-Space: C-Space
  - name: Emacs
    application:
      only: [emacs,Emacs]
    remap:
      # Super-Space:  [Esc , C-Space]
      # C-g:   [Esc, C-g]
      # fcitx5 配置 Alt-space 切换到英文态，然后再向 emacs 发送 C-g
      # C-g:   [Alt-Space, C-g]
      # Esc:   [Alt-Space, Esc]

  - name: Default -- some of these are overridden by the above definitions
    application:
      not: [Gnome-terminal, Emacs,emacs ,foot,Foot,dropdown-term]
      # not: [Google-chrome, Slack, Gnome-terminal, jetbrains-idea,emacs]
    remap:
      Super-C-a: C-a
      Super-C-c: C-c
      Super-C-v: C-v
      Super-C-z: C-z
      Super-C-s: C-s
      Super-C-r: C-r
      Super-C-x: C-x
      # Super-M-r: M-F2
      # C-a: Home
      # C-e: End

      # Alt -> Ctrl
      # Super-Enter: M-Enter
      # C-w: [C-Shift-left, delete]
